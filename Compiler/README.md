# MP-SPDZ Compiler
Experimental MP-SPDZ compiler that can be installed separately from the
MP-SPDZ codebase.

Currently, it has to be installed from GitHub:

```shell
$ pip install -e 'git+https://github.com/sbellem/MP-SPDZ.git@compiler-isolation#egg=mpspdz&subdirectory=Compiler'
```

To compile programs, just do the same as with `compile.py`, except that the
command is `mpspdz-compile` and can be invoked without specifying the path to
it, e.g.:

```shell
$ mpspdz-compile -R 64 --verbose tutorial
```

## Integrating the compiler
Example:

```python
>>> import mpspdz
>>> options = mpspdz.ProgramOptions(ring=4)
>>> with open('Programs/Source/mult3.mpc') as f:
...     source = f.read()
...
>>> prog = mpspdz.compile_prog('mult3', options, source=source)
Default bit length: 3
Default security parameter: 40
Compiling file /usr/src/MP-SPDZ/Programs/Source/mult3.mpc
Program requires:
           1 integer inputs from player 0
           1 integer inputs from player 1
           1 integer inputs from player 2
           2 integer triples
           4 virtual machine rounds
>>> prog.get_output_as_dict()
{'mult3-0': b'\x00\x00\x00\xf2\x00\x00\x00\t\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x02\x00\x00\x00\xa6\x00\x00\x00\x03\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\xa6\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00\x00\xa5\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xb5tluM\x00\x00\x00\xb5rp 3\x00\x00\x00\xb5= do\x00\x00\x00\xb4\x00\x00\x00 \x00\x00\x00\xb3\x00\x00\x00\x00\x00\x00\x00\xb4\x00\x00\x00\n\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x01\x00\x00\x00\x17\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x1f\xff\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x1f\xff\x00\x00\x01\x03\x00\x00\x00\x00\x00\x00\x1f\xff\x00\x00\x01\x04\x00\x00\x00\x00\x00\x00\x1f\xff\x00\x00\x00\xca\x00\x00\x00\x00\x00\x00\x1f\xff', 'schedule': '1\n1\nmult3-0\n1 0\n0\n'}
```
